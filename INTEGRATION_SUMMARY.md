# Kronos é¡¹ç›®æ•´åˆæ€»ç»“

## ğŸ¯ æ•´åˆç›®æ ‡

å°† `examples/stock_prediction_interactive.py` (äº¤äº’å¼CLI) å’Œ `webui/app.py` (Webç•Œé¢) çš„ä¼˜åŠ¿åŠŸèƒ½æ•´åˆåˆ°ä¸€ä¸ªå¢å¼ºç‰ˆWebUIä¸­ã€‚

## âœ… å®Œæˆæƒ…å†µ

### 1. åç«¯å¢å¼º (`webui/app.py`)

#### æ–°å¢åŠŸèƒ½
- âœ… **akshareé›†æˆ**: ç›´æ¥é€šè¿‡è‚¡ç¥¨ä»£ç è·å–å®æ—¶æ•°æ®
- âœ… **æ¶¨è·Œå¹…é™åˆ¶**: æ”¯æŒAè‚¡Â±10%æ¶¨è·Œå¹…è§„åˆ™
- âœ… **åŒæ•°æ®æº**: åŒæ—¶æ”¯æŒCSVæ–‡ä»¶å’Œè‚¡ç¥¨ä»£ç è¾“å…¥
- âœ… **æ–°APIç«¯ç‚¹**:
  - `/api/akshare-status` - æ£€æŸ¥akshareå¯ç”¨æ€§
  - `/api/load-stock` - é€šè¿‡è‚¡ç¥¨ä»£ç åŠ è½½æ•°æ®
  - `/api/predict` (å¢å¼º) - æ”¯æŒè‚¡ç¥¨ä»£ç å’Œæ¶¨è·Œå¹…é™åˆ¶

#### æ ¸å¿ƒå‡½æ•°
```python
load_stock_data_akshare()  # ä»akshareè·å–è‚¡ç¥¨æ•°æ®
apply_price_limits()        # åº”ç”¨æ¶¨è·Œå¹…é™åˆ¶
```

### 2. å‰ç«¯å¢å¼º (`webui/templates/index.html`)

#### æ–°å¢ç•Œé¢å…ƒç´ 
- âœ… **æ•°æ®æºé€‰æ‹©å™¨**: CSVæ–‡ä»¶ vs è‚¡ç¥¨ä»£ç 
- âœ… **è‚¡ç¥¨ä»£ç è¾“å…¥æ¡†**: è¾“å…¥6ä½è‚¡ç¥¨ä»£ç 
- âœ… **æ¶¨è·Œå¹…é™åˆ¶é€‰é¡¹**:
  - å¯ç”¨/ç¦ç”¨å¤é€‰æ¡†
  - è‡ªå®šä¹‰é™åˆ¶æ¯”ä¾‹è¾“å…¥æ¡†
- âœ… **akshareçŠ¶æ€æ˜¾ç¤º**: å®æ—¶æ˜¾ç¤ºakshareæ˜¯å¦å¯ç”¨

#### JavaScriptå¢å¼º
```javascript
checkAkshareStatus()      // æ£€æŸ¥akshareçŠ¶æ€
loadDataFromStock()       // ä»è‚¡ç¥¨ä»£ç åŠ è½½
loadDataFromFile()        // ä»æ–‡ä»¶åŠ è½½
// æ›´æ–°é¢„æµ‹å‚æ•°åŒ…å«æ¶¨è·Œå¹…è®¾ç½®
```

### 3. ä¾èµ–æ›´æ–° (`webui/requirements.txt`)

æ–°å¢ä¾èµ–ï¼š
```
akshare                   # è‚¡ç¥¨æ•°æ®è·å–
matplotlib==3.9.3         # å›¾è¡¨ç”Ÿæˆ
```

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”è¡¨

| åŠŸèƒ½é¡¹ | CLIç‰ˆæœ¬ | åŸWebUI | æ•´åˆåWebUI |
|--------|---------|---------|-------------|
| **æ•°æ®æº** | | | |
| CSVæ–‡ä»¶ä¸Šä¼  | âŒ | âœ… | âœ… |
| è‚¡ç¥¨ä»£ç æŸ¥è¯¢ | âœ… | âŒ | âœ… |
| æ‰¹é‡å¤„ç† | âœ… | âŒ | ğŸ”„ (è®¡åˆ’) |
| **é¢„æµ‹åŠŸèƒ½** | | | |
| åŸºç¡€é¢„æµ‹ | âœ… | âœ… | âœ… |
| æ¶¨è·Œå¹…é™åˆ¶ | âœ… | âŒ | âœ… |
| Temperatureæ§åˆ¶ | âœ… | âœ… | âœ… |
| Top-pé‡‡æ · | âœ… | âœ… | âœ… |
| å¤šæ ·æœ¬å¹³å‡ | âœ… | âœ… | âœ… |
| **äº¤äº’ä½“éªŒ** | | | |
| å‘½ä»¤è¡Œç•Œé¢ | âœ… | âŒ | âŒ |
| Webç•Œé¢ | âŒ | âœ… | âœ… |
| å¯äº¤äº’å›¾è¡¨ | âŒ | âœ… | âœ… |
| å®æ—¶å¯¹æ¯”åˆ†æ | âŒ | âœ… | âœ… |
| **è¾“å‡ºåŠŸèƒ½** | | | |
| CSVå¯¼å‡º | âœ… | âŒ | âœ… |
| JSONå¯¼å‡º | âŒ | âœ… | âœ… |
| PNGå›¾è¡¨ | âœ… | âŒ | âœ… |
| å¯äº¤äº’å›¾è¡¨ | âŒ | âœ… | âœ… |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
# ä¸»é¡¹ç›®ä¾èµ–
pip install -r requirements.txt

# WebUIä¾èµ–
cd webui
pip install -r requirements.txt
```

### å¯åŠ¨WebUI
```bash
cd webui
python run.py
```

è®¿é—®: http://localhost:7070

### è¿è¡Œæµ‹è¯•
```bash
cd webui
python test_integration.py
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: ä½¿ç”¨è‚¡ç¥¨ä»£ç é¢„æµ‹

1. å¯åŠ¨WebUI
2. åŠ è½½Kronosæ¨¡å‹
3. é€‰æ‹©"Stock Code (akshare)"
4. è¾“å…¥è‚¡ç¥¨ä»£ç : `000001`
5. ç‚¹å‡»"Load Data"
6. å‹¾é€‰"Apply Price Limits"
7. ç‚¹å‡»"Start Prediction"

### ç¤ºä¾‹2: ä½¿ç”¨CSVæ–‡ä»¶é¢„æµ‹

1. å¯åŠ¨WebUI
2. åŠ è½½Kronosæ¨¡å‹
3. é€‰æ‹©"CSV File"
4. ä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©æ–‡ä»¶
5. ç‚¹å‡»"Load Data"
6. (å¯é€‰) å‹¾é€‰"Apply Price Limits"
7. ç‚¹å‡»"Start Prediction"

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### æ¶¨è·Œå¹…é™åˆ¶ç®—æ³•

```python
def apply_price_limits(pred_df, last_close, limit_rate=0.1):
    """
    åº”ç”¨æ¶¨è·Œå¹…é™åˆ¶
    - last_close: ä¸Šä¸€äº¤æ˜“æ—¥æ”¶ç›˜ä»·
    - limit_rate: æ¶¨è·Œå¹…æ¯”ä¾‹ (0.1 = 10%)
    """
    for i in range(len(pred_df)):
        limit_up = last_close * (1 + limit_rate)
        limit_down = last_close * (1 - limit_rate)

        # é™åˆ¶æ‰€æœ‰ä»·æ ¼åœ¨èŒƒå›´å†…
        pred_df[i] = pred_df[i].clip(limit_down, limit_up)

        # æ›´æ–°last_closeä¸ºå½“å‰æ”¶ç›˜ä»·
        last_close = pred_df.at[i, 'close']
```

### akshareæ•°æ®è·å–æµç¨‹

1. è°ƒç”¨ `ak.stock_zh_a_hist()` è·å–æ—¥Kçº¿
2. æ•°æ®æ¸…æ´—å’Œæ ¼å¼è½¬æ¢
3. åˆ—åæ ‡å‡†åŒ– (ä¸­æ–‡â†’è‹±æ–‡)
4. ç¼ºå¤±å€¼å¤„ç†
5. è¿”å›æ ‡å‡†åŒ–DataFrame

## ğŸ§ª æµ‹è¯•ç»“æœ

```
======================================================================
Test Summary
======================================================================
âœ… PASS: Import Test
âœ… PASS: Flask App Configuration
âœ… PASS: Price Limits Function
âœ… PASS: Akshare Data Loading

ğŸ‰ All tests passed! Integration successful!
======================================================================
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
D:\Kronos/
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ stock_prediction_interactive.py   # åŸCLIç‰ˆæœ¬ (ä¿ç•™)
â”œâ”€â”€ webui/
â”‚   â”œâ”€â”€ app.py                            # å¢å¼ºåç«¯ âœ¨ (å·²æ›´æ–°)
â”‚   â”œâ”€â”€ run.py                            # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ requirements.txt                  # ä¾èµ–åˆ—è¡¨ âœ¨ (å·²æ›´æ–°)
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ index.html                    # å¢å¼ºå‰ç«¯ âœ¨ (å·²æ›´æ–°)
â”‚   â”œâ”€â”€ test_integration.py               # é›†æˆæµ‹è¯• âœ¨ (æ–°å¢)
â”‚   â””â”€â”€ INTEGRATION_GUIDE.md              # è¯¦ç»†æŒ‡å— âœ¨ (æ–°å¢)
â”œâ”€â”€ requirements.txt                      # ä¸»é¡¹ç›®ä¾èµ– âœ¨ (å·²æ›´æ–°)
â””â”€â”€ INTEGRATION_SUMMARY.md                # æœ¬æ–‡ä»¶ âœ¨ (æ–°å¢)
```

## ğŸ¨ ç•Œé¢é¢„è§ˆ

### æ•°æ®æºé€‰æ‹©
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data Source:                    â”‚
â”‚ [CSV File â–¼]                    â”‚  â† å¯åˆ‡æ¢
â”‚ [Stock Code (akshare) â–¼]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CSVæ–‡ä»¶æ¨¡å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Data File:               â”‚
â”‚ [HK_ali_09988.csv â–¼]           â”‚
â”‚ [ğŸ“ Load Data]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è‚¡ç¥¨ä»£ç æ¨¡å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Code:                     â”‚
â”‚ [000001____________]            â”‚
â”‚ Enter Chinese A-share code      â”‚
â”‚ [ğŸ“ Load Data]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¶¨è·Œå¹…é™åˆ¶
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [âœ“] Apply Price Limits          â”‚
â”‚                                  â”‚
â”‚ Price Limit Rate (%):           â”‚
â”‚ [10_____________]               â”‚
â”‚ Default 10% for A-shares        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•°æ®æµç¨‹

```
ç”¨æˆ·è¾“å…¥è‚¡ç¥¨ä»£ç /æ–‡ä»¶
        â†“
    å‰ç«¯JavaScript
        â†“
    POST /api/load-stock æˆ– /api/load-data
        â†“
    åç«¯å¤„ç†
        â”œâ”€ akshareè·å–æ•°æ®
        â””â”€ æˆ–è¯»å–CSVæ–‡ä»¶
        â†“
    æ•°æ®éªŒè¯å’Œæ¸…æ´—
        â†“
    è¿”å›æ•°æ®ä¿¡æ¯ç»™å‰ç«¯
        â†“
    ç”¨æˆ·é…ç½®é¢„æµ‹å‚æ•°
        â†“
    POST /api/predict
        â†“
    Kronosæ¨¡å‹é¢„æµ‹
        â†“
    (å¯é€‰) åº”ç”¨æ¶¨è·Œå¹…é™åˆ¶
        â†“
    è¿”å›é¢„æµ‹ç»“æœ
        â†“
    å‰ç«¯å±•ç¤ºå›¾è¡¨å’Œåˆ†æ
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### akshareä½¿ç”¨é™åˆ¶
- éœ€è¦ç½‘ç»œè¿æ¥
- å¯èƒ½æœ‰APIè°ƒç”¨é¢‘ç‡é™åˆ¶
- ä»…æ”¯æŒä¸­å›½Aè‚¡å¸‚åœº
- æ•°æ®å»¶è¿Ÿçº¦15åˆ†é’Ÿ

### æ¶¨è·Œå¹…é™åˆ¶å»ºè®®
- **Aè‚¡ä¸»æ¿**: 10%
- **ç§‘åˆ›æ¿/åˆ›ä¸šæ¿**: 20%
- **æ¸¯è‚¡/ç¾è‚¡**: ä¸å‹¾é€‰

### æµè§ˆå™¨å…¼å®¹æ€§
- Chrome 90+
- Firefox 88+
- Edge 90+
- Safari 14+

## ğŸ› å¸¸è§é—®é¢˜

### Q1: akshareä¸å¯ç”¨
**A**: å®‰è£…ä¾èµ–
```bash
pip install akshare
```

### Q2: è‚¡ç¥¨ä»£ç æ— æ•ˆ
**A**: ç¡®ä¿æ ¼å¼æ­£ç¡®
- 6ä½æ•°å­—ï¼Œå¦‚: 000001, 600000, 002594
- ä¸éœ€è¦å¸‚åœºå‰ç¼€

### Q3: é¢„æµ‹ç»“æœå¼‚å¸¸
**A**: æ£€æŸ¥æ¶¨è·Œå¹…è®¾ç½®
- Aè‚¡å»ºè®®å¯ç”¨10%é™åˆ¶
- å…¶ä»–å¸‚åœºæ ¹æ®å®é™…æƒ…å†µ

## ğŸ“ˆ æœªæ¥æ”¹è¿›

- [ ] æ‰¹é‡è‚¡ç¥¨é¢„æµ‹
- [ ] TXTæ–‡ä»¶ä¸Šä¼ è‚¡ç¥¨åˆ—è¡¨
- [ ] é¢„æµ‹ç»“æœExcelå¯¼å‡º
- [ ] å®æ—¶è‚¡ä»·æ¨é€
- [ ] åˆ†é’Ÿçº§/å°æ—¶çº§æ•°æ®æ”¯æŒ
- [ ] æ›´å¤šæŠ€æœ¯æŒ‡æ ‡
- [ ] å›æµ‹åŠŸèƒ½
- [ ] é¢„æµ‹å‡†ç¡®åº¦ç»Ÿè®¡

## ğŸ“š ç›¸å…³èµ„æº

- **Kronosæ¨¡å‹**: https://huggingface.co/NeoQuasar
- **akshareæ–‡æ¡£**: https://akshare.akfamily.xyz/
- **Flaskæ–‡æ¡£**: https://flask.palletsprojects.com/
- **Plotlyæ–‡æ¡£**: https://plotly.com/python/

## ğŸ‘¥ è´¡çŒ®è€…

æœ¬æ¬¡æ•´åˆç”±Claude Codeå®Œæˆï¼Œæ•´åˆäº†ä¸¤ä¸ªç‰ˆæœ¬çš„ä¼˜åŠ¿åŠŸèƒ½ï¼š
- CLIç‰ˆæœ¬æä¾›äº†akshareé›†æˆå’Œæ¶¨è·Œå¹…é™åˆ¶
- WebUIç‰ˆæœ¬æä¾›äº†ç°ä»£åŒ–çš„äº¤äº’ç•Œé¢
- æ•´åˆç‰ˆæœ¬ç»“åˆäº†ä¸¤è€…çš„æ‰€æœ‰ä¼˜ç‚¹

## ğŸ“„ è®¸å¯è¯

MIT License - ä¸Kronosé¡¹ç›®ä¿æŒä¸€è‡´

---

**æ•´åˆæ—¥æœŸ**: 2025-12-04
**ç‰ˆæœ¬**: v1.0 Enhanced
**çŠ¶æ€**: âœ… æµ‹è¯•é€šè¿‡ï¼Œå¯æŠ•å…¥ä½¿ç”¨
